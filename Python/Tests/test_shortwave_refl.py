import numpy as np
import sys
import os
import pytest

#Find the root directory dynmimically. https://stackoverflow.com/questions/73230007/how-can-i-set-a-root-directory-dynamically
root_dir = os.path.abspath(os.path.join(os.path.dirname(__file__), "..", ".."))
sys.path.append(root_dir)
from Python.src.Heat_Flux.hflux_shortwave_refl import hflux_shortwave_relf
from Python.src.Utilities.Input_reader import readFromFile

def test_shortwave_refl():
    return True

    # input = readFromFile(os.getcwd() + "\\Python\\src\\Utilities" + "\\example_data.xlsx")
    # year = input["met_data"][0]
    # month = input["met_data"][1]
    # day = input["met_data"][2]
    # hour = input["met_data"][3]
    # minute = input["met_data"][4]
    # time_met = input["met_data"][5]
    # time_mod = input["time_mod"][0]

    t_zone = 5
    lon = -76.067000000000000
    lat = 43.030000000000000

    # sol_refl = hflux_shortwave_relf(year, month, day, hour, minute, lat, lon, t_zone, time_met, time_mod)
    matlab_output = [0.0830696531751561,
0.0842738509457202,
0.0855026910279460,
0.0867555043928942,
0.0880316220116252,
0.0893303748551999,
0.0906529002407182,
0.0920007592357054,
0.0933739184368597,
0.0947723444408794,
0.0961960038444627,
0.0976461391871628,
0.0991239900189533,
0.100629518452164,
0.102162686599123,
0.103723456572161,
0.105313185542487,
0.106933227165348,
0.108583538279134,
0.110264075722234,
0.111974796333036,
0.113717182070812,
0.115492710778623,
0.117301333120545,
0.119142999760655,
0.121017661363031,
0.122926935622376,
0.124872435436454,
0.126854104273924,
0.128871885603450,
0.130925722893692,
0.133017381357327,
0.135148620642461,
0.137319375870899,
0.139529582164447,
0.141779174644909,
0.144070078705654,
0.146404213314383,
0.148781503954401,
0.151201876109010,
0.153665255261516,
0.156173740573838,
0.158729423821726,
0.161332219409228,
0.163982041740392,
0.166678805219264,
0.169424797334984,
0.172222297124646,
0.175071206314236,
0.177971426629739,
0.180922859797139,
0.183927997207601,
0.186989320624031,
0.190106717330025,
0.193280074609180,
0.196509279745091,
0.199797044667964,
0.203146070388347,
0.206556227810356,
0.210027387838106,
0.213559421375712,
0.217155278637392,
0.220817897507508,
0.224547130395399,
0.228342829710399,
0.232204847861847,
0.236136392247366,
0.240140656402606,
0.244217471943938,
0.248366670487736,
0.252588083650369,
0.256885196113787,
0.261261477041528,
0.265716734772353,
0.270250777645023,
0.274863413998296,
0.279558427148415,
0.284339583111265,
0.289206664275072,
0.294159453028063,
0.299197731758465,
0.304325605065539,
0.309547158339345,
0.314862145154311,
0.320270319084866,
0.325771433705436,
0.331369938896436,
0.337070263293085,
0.342872128602015,
0.348775256529863,
0.354779368783261,
0.360889285925632,
0.367109805110613,
0.373440612930161,
0.379881395976235,
0.386431840840793,
0.393097165632328,
0.399882562755123,
0.406787680244818,
0.413812166137055,
0.420955668467477,
0.428223831273897,
0.435622270461492,
0.443150591866947,
0.450808401326945,
0.458595304678171,
0.466517401860093,
0.474580762111096,
0.482784945216235,
0.491129510960567,
0.499614019129149,
0.508245057196270,
0.517029179215540,
0.525965894840986,
0.535054713726639,
0.544295145526528,
0.553694298623628,
0.563259245091893,
0.572989440121819,
0.582884338903904,
0.592943396628643,
0.603174277788834,
0.613584607486019,
0.624173781823808,
0.634941196905810,
0.645886248835636,
0.657017195341231,
0.668342251444933,
0.679860749191943,
0.691572020627462,
0.703475397796690,
0.715579770815819,
0.727893983498081,
0.740417298434241,
0.753148978215066,
0.766088285431320,
0.779244783883286,
0.792627987116233,
0.806237082338406,
0.820071256758049,
0.834129697583409,
0.848422685858172,
0.862960447971876,
0.877742089151545,
0.892766714624199,
0.908033429616862,
0.925570132153623,
0.945387806851540,
0.964460188827080,
0.979761013196710,
0.988264015076899,
0.992105572340447,
0.995343723455320,
0.997834694430728,
0.999434711275884,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1,
1]    

    # for i in range(len(sol_refl[:200])):
    #     if round(sol_refl[i], 12) != round(matlab_output[i], 12):
    #         print(sol_refl[i], matlab_output[i])

test_shortwave_refl()